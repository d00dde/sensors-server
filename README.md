# Сервер, обеспечивающий взаимодействие датчиков с разными каналами связи.

### :clipboard: Описание:

**Сервер (express + MongoDB)** имеет такой функционал:

- Работа с датчиками: датчик, когда происходит **_event_**, отправляет на сервер POST-запрос, в котором сообщает свой **_sensor ID_**, тип события и сообщение, зашифрованные при помощи **_sensor secret_**. Получив запрос, сервер извлекает из базы данных **_sensor secret_** датчика, расшифровывает тип события и сообщение, проверяет их валидность. Если сообщение валидно, то делает запись **_event_** в базу данных и вызывает оповещение по указанным для датчика каналам (SMS, viber, telegram, etc). Так, как **_sensor secret_** известен только датчику и серверу, то такой подход защищает от иммитации событий датчика посторонним источником.
- Регистрация пользователей при помощи email и password, возможно OAuth 2.0.
- Авторизация пользователя с выдачей ему JWT-токена с органиченным сроком действия.
- Разделение прав пользователей (пользователь, администратор, мастер): + Пользователь может создавать **_sensors_**, указывать их описание и каналы связи, по которым нужно оповещать о событиях, просматривать список событий каждого своего датчика, изменять описание и каналы связи для своих датчиков. + Администратор видит список всех пользователей и их **_sensors_**, может устанавливать **_sensor secret_** и **_sensor ID_** для любого из датчиков. Таким образом, системные данные не видны пользователю и устанавливаются неявным образом при настройке конкретного датчика без участия пользователя. + Мастер может выдавать и забирать права администратора пользователям.
- Работа с каналами связи: сервер, используя API различных каналов оповещения (SMS, viber, telegram, etc) и данные, указанные пользователем для каждого **_sensors_**, производит автоматическое оповещение в случае **_event_**.

---

**Клиент SPA (React + Redux + Router)** имеет такой функционал:

- Страница регистрации и авторизации для пользователя.
- Хранение JWT-токена в local storage, автоматическое подключение при его наличии в хранилище.
- Страница со списком **_sensors_** пользователя, возможность добавить, удалить, изменить **_sensor_**, его описание и необходимые каналы для оповещения.
- Страница датчика, позволяющая просмотреть список **_events_** конкретного **_sensor_**, их дату и время, тип события и сообщение от датчика.
- Страница пользователей (для администратора и мастера) со списком всех пользователей. Администратор на ней может только выбрать пользователя для просмотра его **_sensors_**. Мастер же на ней видит действующих администраторов и может как дать любому пользователю права администратора, так и убрать их.
- Страница со списком **_sensors_** администратора, где он может установить или изменить для любого **_sensor_** его **_sensor secret_** и **_sensor ID_**.
- Смена языка интерфейса.

---

####:wrench: Используются технологии:

#####Backend

- node.js;
- express;
- mongoose;
- JSON Web Token;
- telegram API;
- native JS.

#####Frontend

- React JS.
