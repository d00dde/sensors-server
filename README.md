# Сервер, обеспечивающий взаимодействие датчиков с разными каналами связи. #

## Описание: ##

**Сервер (express + MongoDB)** имеет такой функционал:

+ Работа с датчиками: датчик, когда происходит ***event***, отправляет на сервер POST-запрос, в котором сообщает свой ***sensor ID***, тип события и сообщение, зашифрованные при помощи ***sensor secret***. Получив запрос, сервер извлекает из базы данных ***sensor secret*** датчика, расшифровывает тип события и сообщение, проверяет их валидность. Если сообщение валидно, то делает запись ***event*** в базу данных и вызывает оповещение по указанным для датчика каналам (SMS, viber, telegram, etc). Так, как ***sensor secret*** известен только датчику и серверу, то такой подход защищает от иммитации событий датчика посторонним источником.
+ Регистрация пользователей при помощи email и password, возможно OAuth 2.0.
+ Авторизация пользователя с выдачей ему JWT-токена с органиченным сроком действия.
+ Разделение прав пользователей (пользователь, администратор, мастер):
	+ Пользователь может создавать ***sensors***, указывать их описание и каналы связи, по которым нужно оповещать о событиях, просматривать список событий каждого своего датчика, изменять описание и каналы связи для своих датчиков.
	+ Администратор видит список всех пользователей и их ***sensors***, может устанавливать ***sensor secret*** и ***sensor ID*** для любого из датчиков. Таким образом, системные данные не видны пользователю и устанавливаются неявным образом при настройке конкретного датчика без участия пользователя.
	+ Мастер может выдавать и забирать права администратора пользователям.
+ Работа с каналами связи: сервер, используя API различных каналов оповещения (SMS, viber, telegram, etc) и данные, указанные пользователем для каждого ***sensors***, производит автоматическое оповещение в случае ***event***.

***

**Клиент SPA (React + Redux + Router)** имеет такой функционал:

+ Страница регистрации и авторизации для пользователя.
+ Хранение JWT-токена в local storage, автоматическое подключение при его наличии в хранилище.
+ Страница со списком ***sensors*** пользователя, возможность добавить, удалить, изменить ***sensor***, его описание и необходимые каналы для оповещения.
+ Страница датчика, позволяющая просмотреть список ***events*** конкретного ***sensor***, их дату и время, тип события и сообщение от датчика.
+ Страница пользователей (для администратора и мастера) со списком всех пользователей. Администратор на ней может только выбрать пользователя для просмотра его ***sensors***. Мастер же на ней видит действующих администраторов и может как дать любому пользователю права администратора, так и убрать их.
+ Страница со списком ***sensors*** администратора, где он может установить или изменить для любого ***sensor*** его ***sensor secret*** и ***sensor ID***.
+ Смена языка интерфейса.

***

**Технологии в проекте:**

- node.js;
- express;
- mongoose;
- JSON Web Token;


- telegram API;


- native JS.

<style>
body {
  background-color: linen;
}
</style>
